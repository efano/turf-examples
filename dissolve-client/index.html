<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Turf dissolve client side</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />

    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            width: 100%;
            top: 0;
            bottom: 0;
        }
    </style>

</head>

<body>
    <div id="map"></div>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>
    <script>

        // create Leaflet map, centered on Texas
        var map = L.map('map', {
            zoomSnap: .1,
            center: [37, -88],
            zoom: 8
        });

        // add a basemap of tiles
        L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager_nolabels/{z}/{x}/{y}.png', {
            maxZoom: 18, attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy;<a href="https://carto.com/attribution">CARTO</a>'
        }).addTo(map);

        $.getJSON('data/lowerCumberland.json', function (data) {

            drawMap(data);
        })

        function drawMap(data) {

            var polygons = L.geoJson(data).addTo(map);
            // var conv = toGeoJSON(polygons);
            var polygon = polygons.toGeoJSON();
            console.log(polygon);

            var huc6 = polygon.features[0].properties;
            console.log(huc6);
        


             var features = turf.featureCollection([
                 turf.polygon([huc6], { combine: 'yes' })
             ]);
            // var dissolved = turf.dissolve(features, { propertyName: 'combine' });

            // var features =  turf.featureCollection([
            //     turf.polygon([[[-88.109,37.306],[-88.111,37.306],[-88.113,37.305],[-88.114,37.304],[-88.115,37.304],[-88.117,37.305],[-88.12,37.304],[-88.12,37.303],[-88.122,37.302],[-88.123,37.301],[-88.125,37.3],[-88.127,37.298],[-88.128,37.297],[-88.129,37.297],[-88.131,37.298],[-88.132,37.297],[-88.133,37.297],[-88.135,37.294],[-88.134,37.293],[-88.134,37.292],[-88.135,37.291],[-88.136,37.29],[-88.137,37.289],[-88.135,37.289],[-88.137,37.288],[-88.138,37.287],[-88.139,37.286],[-88.14,37.286],[-88.142,37.286],[-88.143,37.286],[-88.144,37.286],[-88.145,37.286],[-88.146,37.286],[-88.148,37.286],[-88.149,37.287],[-88.149,37.29],[-88.15,37.293],[-88.15,37.294],[-88.151,37.296],[-88.152,37.297],[-88.152,37.298],[-88.154,37.299],[-88.153,37.3],[-88.151,37.301],[-88.15,37.301],[-88.149,37.302],[-88.148,37.302],[-88.148,37.303],[-88.148,37.304],[-88.148,37.305],[-88.148,37.306],[-88.147,37.307],[-88.146,37.308],[-88.145,37.309],[-88.146,37.31],[-88.147,37.31],[-88.148,37.311],[-88.147,37.312],[-88.146,37.313],[-88.146,37.314],[-88.144,37.316],[-88.142,37.317],[-88.141,37.318],[-88.139,37.319],[-88.139,37.32],[-88.137,37.321],[-88.135,37.323],[-88.132,37.326],[-88.131,37.326],[-88.13,37.327],[-88.128,37.328],[-88.128,37.327],[-88.128,37.325],[-88.127,37.325],[-88.126,37.324],[-88.125,37.324],[-88.124,37.324],[-88.123,37.325],[-88.122,37.326],[-88.119,37.326],[-88.117,37.326],[-88.117,37.325],[-88.116,37.324],[-88.115,37.324],[-88.115,37.323],[-88.114,37.323],[-88.112,37.324],[-88.111,37.324],[-88.109,37.324],[-88.108,37.323],[-88.109,37.321],[-88.108,37.321],[-88.107,37.32],[-88.106,37.319],[-88.107,37.318],[-88.107,37.317],[-88.108,37.316],[-88.107,37.314],[-88.108,37.313],[-88.108,37.312],[-88.107,37.31],[-88.108,37.309],[-88.108,37.307],[-88.109,37.306]]],  {combine: 'yes'}),
            //     turf.polygon([[[-88.211,37.305],[-88.212,37.305],[-88.213,37.304],[-88.214,37.303],[-88.215,37.302],[-88.216,37.301],[-88.216,37.3],[-88.217,37.298],[-88.218,37.298],[-88.218,37.297],[-88.218,37.296],[-88.216,37.295],[-88.216,37.294],[-88.217,37.292],[-88.217,37.291],[-88.216,37.29],[-88.217,37.288],[-88.218,37.287],[-88.217,37.285],[-88.219,37.286],[-88.221,37.285],[-88.222,37.284],[-88.223,37.284],[-88.225,37.283],[-88.226,37.282],[-88.226,37.28],[-88.227,37.28],[-88.227,37.279],[-88.228,37.278],[-88.229,37.276],[-88.23,37.275],[-88.231,37.275],[-88.233,37.274],[-88.235,37.274],[-88.236,37.273],[-88.237,37.271],[-88.238,37.271],[-88.24,37.272],[-88.241,37.272],[-88.242,37.27],[-88.243,37.268],[-88.243,37.267],[-88.242,37.267],[-88.241,37.267],[-88.241,37.266],[-88.241,37.264],[-88.24,37.264],[-88.238,37.262],[-88.237,37.261],[-88.236,37.26],[-88.235,37.259],[-88.236,37.258],[-88.238,37.256],[-88.238,37.255],[-88.238,37.254],[-88.237,37.254],[-88.237,37.253],[-88.239,37.252],[-88.239,37.251],[-88.241,37.25],[-88.242,37.25],[-88.243,37.249],[-88.245,37.248],[-88.245,37.247],[-88.245,37.246],[-88.244,37.245],[-88.243,37.244],[-88.244,37.243],[-88.244,37.242],[-88.245,37.241],[-88.245,37.24],[-88.247,37.239],[-88.247,37.238],[-88.248,37.238],[-88.247,37.235],[-88.247,37.234],[-88.246,37.234],[-88.245,37.232],[-88.246,37.232],[-88.246,37.231],[-88.247,37.231],[-88.248,37.231],[-88.25,37.23],[-88.251,37.23],[-88.252,37.228],[-88.253,37.227],[-88.254,37.226],[-88.256,37.226],[-88.258,37.225],[-88.258,37.224],[-88.256,37.223],[-88.253,37.222],[-88.252,37.221],[-88.251,37.22],[-88.25,37.219],[-88.249,37.219],[-88.248,37.218],[-88.249,37.217],[-88.25,37.215],[-88.25,37.214],[-88.252,37.212],[-88.254,37.213],[-88.255,37.213],[-88.258,37.211],[-88.259,37.21],[-88.26,37.21],[-88.261,37.209],[-88.262,37.209],[-88.263,37.209],[-88.266,37.208],[-88.267,37.208],[-88.268,37.208],[-88.27,37.207],[-88.273,37.207],[-88.274,37.206],[-88.275,37.206],[-88.278,37.206],[-88.28,37.207],[-88.281,37.207],[-88.282,37.207],[-88.284,37.206],[-88.285,37.206],[-88.286,37.206],[-88.288,37.206],[-88.289,37.206],[-88.291,37.208],[-88.292,37.208],[-88.293,37.209],[-88.294,37.211],[-88.295,37.212],[-88.295,37.214],[-88.295,37.215],[-88.296,37.216],[-88.298,37.216],[-88.299,37.217],[-88.3,37.217],[-88.302,37.218],[-88.301,37.219],[-88.3,37.22],[-88.298,37.221],[-88.298,37.223],[-88.297,37.224],[-88.296,37.225],[-88.297,37.226],[-88.298,37.227],[-88.298,37.228],[-88.299,37.229],[-88.298,37.23],[-88.297,37.23],[-88.295,37.23],[-88.294,37.232],[-88.293,37.232],[-88.293,37.233],[-88.292,37.233],[-88.292,37.234],[-88.294,37.236],[-88.294,37.238],[-88.293,37.238],[-88.291,37.24],[-88.291,37.241],[-88.29,37.242],[-88.29,37.243],[-88.291,37.244],[-88.291,37.245],[-88.29,37.245],[-88.288,37.247],[-88.287,37.248],[-88.287,37.249],[-88.287,37.25],[-88.288,37.251],[-88.287,37.253],[-88.288,37.255],[-88.287,37.256],[-88.287,37.257],[-88.287,37.258],[-88.288,37.259],[-88.289,37.259],[-88.29,37.259],[-88.292,37.26],[-88.293,37.26],[-88.295,37.26],[-88.295,37.261],[-88.296,37.261],[-88.298,37.261],[-88.299,37.262],[-88.299,37.263],[-88.298,37.266],[-88.299,37.266],[-88.3,37.267],[-88.3,37.269],[-88.3,37.27],[-88.299,37.271],[-88.298,37.272],[-88.297,37.273],[-88.296,37.273],[-88.294,37.272],[-88.293,37.272],[-88.29,37.274],[-88.289,37.274],[-88.289,37.275],[-88.288,37.275],[-88.287,37.276],[-88.285,37.276],[-88.284,37.277],[-88.283,37.278],[-88.28,37.28],[-88.278,37.28],[-88.277,37.281],[-88.275,37.282],[-88.273,37.283],[-88.271,37.284],[-88.27,37.286],[-88.268,37.287],[-88.266,37.288],[-88.265,37.289],[-88.264,37.289],[-88.264,37.29],[-88.265,37.292],[-88.264,37.293],[-88.263,37.293],[-88.263,37.294],[-88.263,37.295],[-88.263,37.296],[-88.262,37.297],[-88.26,37.298],[-88.259,37.298],[-88.258,37.299],[-88.256,37.299],[-88.256,37.3],[-88.255,37.301],[-88.254,37.301],[-88.252,37.3],[-88.251,37.3],[-88.25,37.301],[-88.249,37.302],[-88.248,37.303],[-88.247,37.303],[-88.246,37.303],[-88.245,37.302],[-88.241,37.302],[-88.239,37.305],[-88.237,37.305],[-88.236,37.305],[-88.235,37.305],[-88.233,37.307],[-88.232,37.308],[-88.231,37.309],[-88.231,37.31],[-88.231,37.311],[-88.233,37.313],[-88.234,37.313],[-88.235,37.313],[-88.236,37.313],[-88.236,37.314],[-88.236,37.316],[-88.235,37.317],[-88.235,37.319],[-88.234,37.32],[-88.233,37.32],[-88.231,37.321],[-88.232,37.322],[-88.23,37.323],[-88.229,37.324],[-88.227,37.323],[-88.225,37.323],[-88.224,37.322],[-88.223,37.322],[-88.219,37.321],[-88.218,37.32],[-88.219,37.319],[-88.219,37.318],[-88.219,37.317],[-88.219,37.316],[-88.219,37.315],[-88.219,37.314],[-88.217,37.313],[-88.217,37.312],[-88.216,37.311],[-88.216,37.31],[-88.217,37.31],[-88.217,37.309],[-88.215,37.308],[-88.214,37.308],[-88.212,37.307],[-88.212,37.306],[-88.211,37.305]]],  {combine: 'yes'}),
            //     turf.polygon([[[-88.211,37.305],[-88.209,37.305],[-88.208,37.304],[-88.207,37.303],[-88.206,37.302],[-88.207,37.301],[-88.206,37.3],[-88.205,37.3],[-88.204,37.3],[-88.204,37.299],[-88.203,37.299],[-88.202,37.299],[-88.2,37.299],[-88.2,37.3],[-88.199,37.301],[-88.199,37.302],[-88.199,37.303],[-88.199,37.304],[-88.198,37.304],[-88.197,37.304],[-88.197,37.307],[-88.196,37.308],[-88.194,37.309],[-88.194,37.31],[-88.193,37.311],[-88.193,37.312],[-88.191,37.312],[-88.19,37.313],[-88.188,37.313],[-88.187,37.312],[-88.186,37.312],[-88.184,37.313],[-88.182,37.313],[-88.182,37.312],[-88.18,37.312],[-88.178,37.312],[-88.177,37.311],[-88.176,37.31],[-88.176,37.309],[-88.176,37.308],[-88.176,37.306],[-88.176,37.305],[-88.176,37.303],[-88.174,37.302],[-88.173,37.302],[-88.17,37.3],[-88.169,37.299],[-88.166,37.301],[-88.165,37.3],[-88.165,37.299],[-88.164,37.299],[-88.163,37.299],[-88.162,37.3],[-88.161,37.299],[-88.162,37.298],[-88.163,37.297],[-88.164,37.294],[-88.165,37.293],[-88.166,37.292],[-88.167,37.291],[-88.168,37.29],[-88.169,37.288],[-88.17,37.287],[-88.171,37.285],[-88.172,37.284],[-88.172,37.283],[-88.173,37.282],[-88.173,37.281],[-88.175,37.281],[-88.176,37.28],[-88.177,37.279],[-88.176,37.278],[-88.176,37.277],[-88.178,37.276],[-88.178,37.275],[-88.178,37.273],[-88.178,37.272],[-88.179,37.272],[-88.18,37.27],[-88.179,37.269],[-88.178,37.268],[-88.178,37.267],[-88.179,37.266],[-88.179,37.264],[-88.177,37.264],[-88.176,37.265],[-88.174,37.264],[-88.173,37.264],[-88.171,37.264],[-88.169,37.263],[-88.168,37.263],[-88.166,37.262],[-88.165,37.259],[-88.164,37.259],[-88.163,37.258],[-88.163,37.256],[-88.162,37.255],[-88.161,37.255],[-88.16,37.256],[-88.158,37.255],[-88.158,37.254],[-88.156,37.253],[-88.156,37.252],[-88.157,37.251],[-88.156,37.25],[-88.155,37.249],[-88.154,37.248],[-88.154,37.247],[-88.152,37.247],[-88.151,37.246],[-88.151,37.245],[-88.15,37.245],[-88.149,37.246],[-88.148,37.246],[-88.147,37.245],[-88.146,37.244],[-88.146,37.243],[-88.146,37.242],[-88.145,37.242],[-88.144,37.242],[-88.142,37.242],[-88.141,37.242],[-88.14,37.242],[-88.139,37.242],[-88.136,37.241],[-88.134,37.241],[-88.133,37.241],[-88.132,37.239],[-88.133,37.238],[-88.134,37.237],[-88.136,37.236],[-88.137,37.235],[-88.137,37.233],[-88.138,37.233],[-88.138,37.232],[-88.136,37.23],[-88.135,37.23],[-88.135,37.229],[-88.135,37.228],[-88.135,37.227],[-88.136,37.226],[-88.137,37.225],[-88.138,37.224],[-88.138,37.223],[-88.139,37.223],[-88.14,37.223],[-88.141,37.223],[-88.141,37.222],[-88.141,37.221],[-88.141,37.22],[-88.142,37.219],[-88.142,37.218],[-88.143,37.219],[-88.145,37.218],[-88.146,37.218],[-88.147,37.22],[-88.148,37.219],[-88.15,37.22],[-88.149,37.221],[-88.149,37.222],[-88.15,37.224],[-88.151,37.225],[-88.152,37.225],[-88.153,37.226],[-88.154,37.226],[-88.155,37.227],[-88.159,37.228],[-88.16,37.23],[-88.16,37.232],[-88.16,37.233],[-88.16,37.234],[-88.163,37.234],[-88.165,37.233],[-88.166,37.231],[-88.168,37.23],[-88.168,37.229],[-88.168,37.228],[-88.169,37.227],[-88.17,37.225],[-88.17,37.224],[-88.17,37.223],[-88.171,37.222],[-88.173,37.222],[-88.177,37.222],[-88.178,37.222],[-88.179,37.222],[-88.18,37.221],[-88.181,37.22],[-88.182,37.22],[-88.182,37.219],[-88.182,37.218],[-88.182,37.217],[-88.182,37.215],[-88.183,37.215],[-88.184,37.214],[-88.185,37.214],[-88.186,37.212],[-88.187,37.211],[-88.189,37.21],[-88.19,37.21],[-88.193,37.209],[-88.194,37.209],[-88.196,37.207],[-88.197,37.206],[-88.199,37.205],[-88.201,37.204],[-88.203,37.203],[-88.205,37.202],[-88.207,37.201],[-88.208,37.2],[-88.208,37.199],[-88.209,37.198],[-88.21,37.197],[-88.211,37.195],[-88.212,37.196],[-88.213,37.196],[-88.214,37.194],[-88.215,37.195],[-88.217,37.195],[-88.218,37.195],[-88.219,37.196],[-88.219,37.197],[-88.22,37.197],[-88.221,37.198],[-88.222,37.198],[-88.224,37.198],[-88.225,37.198],[-88.226,37.197],[-88.227,37.197],[-88.228,37.197],[-88.229,37.198],[-88.231,37.199],[-88.232,37.199],[-88.233,37.199],[-88.234,37.199],[-88.235,37.2],[-88.235,37.201],[-88.233,37.202],[-88.233,37.203],[-88.232,37.204],[-88.231,37.204],[-88.23,37.205],[-88.23,37.206],[-88.231,37.206],[-88.231,37.209],[-88.232,37.209],[-88.233,37.208],[-88.234,37.208],[-88.236,37.208],[-88.237,37.208],[-88.239,37.208],[-88.241,37.208],[-88.242,37.209],[-88.243,37.209],[-88.244,37.21],[-88.246,37.211],[-88.248,37.21],[-88.249,37.211],[-88.25,37.211],[-88.251,37.211],[-88.252,37.211],[-88.252,37.212],[-88.25,37.214],[-88.25,37.215],[-88.249,37.217],[-88.248,37.218],[-88.249,37.219],[-88.25,37.219],[-88.251,37.22],[-88.252,37.221],[-88.253,37.222],[-88.256,37.223],[-88.258,37.224],[-88.258,37.225],[-88.256,37.226],[-88.254,37.226],[-88.253,37.227],[-88.252,37.228],[-88.251,37.23],[-88.25,37.23],[-88.248,37.231],[-88.247,37.231],[-88.246,37.231],[-88.246,37.232],[-88.245,37.232],[-88.246,37.234],[-88.247,37.234],[-88.247,37.235],[-88.248,37.238],[-88.247,37.238],[-88.247,37.239],[-88.245,37.24],[-88.245,37.241],[-88.244,37.242],[-88.244,37.243],[-88.243,37.244],[-88.244,37.245],[-88.245,37.246],[-88.245,37.247],[-88.245,37.248],[-88.243,37.249],[-88.242,37.25],[-88.241,37.25],[-88.239,37.251],[-88.239,37.252],[-88.237,37.253],[-88.237,37.254],[-88.238,37.254],[-88.238,37.255],[-88.238,37.256],[-88.236,37.258],[-88.235,37.259],[-88.236,37.26],[-88.237,37.261],[-88.238,37.262],[-88.24,37.264],[-88.241,37.264],[-88.241,37.266],[-88.241,37.267],[-88.242,37.267],[-88.243,37.267],[-88.243,37.268],[-88.242,37.27],[-88.241,37.272],[-88.24,37.272],[-88.238,37.271],[-88.237,37.271],[-88.236,37.273],[-88.235,37.274],[-88.233,37.274],[-88.231,37.275],[-88.23,37.275],[-88.229,37.276],[-88.228,37.278],[-88.227,37.279],[-88.227,37.28],[-88.226,37.28],[-88.226,37.282],[-88.225,37.283],[-88.223,37.284],[-88.222,37.284],[-88.221,37.285],[-88.219,37.286],[-88.217,37.285],[-88.218,37.287],[-88.217,37.288],[-88.216,37.29],[-88.217,37.291],[-88.217,37.292],[-88.216,37.294],[-88.216,37.295],[-88.218,37.296],[-88.218,37.297],[-88.218,37.298],[-88.217,37.298],[-88.216,37.3],[-88.216,37.301],[-88.215,37.302],[-88.214,37.303],[-88.213,37.304],[-88.212,37.305],[-88.211,37.305]]],  {combine: 'yes'}),
            //     turf.polygon([[[-88.109,37.306],[-88.109,37.305],[-88.106,37.305],[-88.104,37.306],[-88.103,37.306],[-88.102,37.306],[-88.103,37.305],[-88.103,37.304],[-88.101,37.304],[-88.1,37.303],[-88.099,37.301],[-88.099,37.3],[-88.098,37.299],[-88.099,37.299],[-88.101,37.299],[-88.101,37.298],[-88.1,37.297],[-88.099,37.297],[-88.099,37.296],[-88.097,37.296],[-88.096,37.295],[-88.098,37.292],[-88.099,37.291],[-88.102,37.291],[-88.103,37.29],[-88.103,37.289],[-88.104,37.289],[-88.105,37.288],[-88.105,37.286],[-88.105,37.285],[-88.105,37.284],[-88.104,37.283],[-88.103,37.282],[-88.103,37.281],[-88.103,37.28],[-88.101,37.28],[-88.1,37.28],[-88.098,37.28],[-88.097,37.279],[-88.095,37.278],[-88.094,37.278],[-88.092,37.279],[-88.091,37.279],[-88.089,37.28],[-88.088,37.281],[-88.087,37.28],[-88.083,37.278],[-88.082,37.277],[-88.082,37.275],[-88.083,37.272],[-88.083,37.271],[-88.083,37.27],[-88.082,37.268],[-88.082,37.267],[-88.082,37.266],[-88.083,37.265],[-88.085,37.266],[-88.086,37.266],[-88.088,37.267],[-88.089,37.267],[-88.09,37.266],[-88.092,37.266],[-88.094,37.266],[-88.095,37.266],[-88.098,37.265],[-88.1,37.264],[-88.1,37.263],[-88.101,37.263],[-88.101,37.264],[-88.102,37.265],[-88.102,37.266],[-88.103,37.266],[-88.104,37.265],[-88.105,37.264],[-88.106,37.264],[-88.108,37.264],[-88.109,37.265],[-88.111,37.266],[-88.113,37.266],[-88.116,37.266],[-88.117,37.266],[-88.12,37.266],[-88.122,37.266],[-88.124,37.266],[-88.125,37.266],[-88.127,37.265],[-88.128,37.265],[-88.13,37.265],[-88.131,37.266],[-88.132,37.266],[-88.133,37.268],[-88.134,37.269],[-88.134,37.27],[-88.134,37.272],[-88.135,37.274],[-88.136,37.276],[-88.136,37.277],[-88.135,37.278],[-88.134,37.279],[-88.134,37.28],[-88.133,37.282],[-88.133,37.283],[-88.134,37.285],[-88.134,37.286],[-88.133,37.288],[-88.134,37.289],[-88.135,37.289],[-88.137,37.289],[-88.136,37.29],[-88.135,37.291],[-88.134,37.292],[-88.134,37.293],[-88.135,37.294],[-88.133,37.297],[-88.132,37.297],[-88.131,37.298],[-88.129,37.297],[-88.128,37.297],[-88.127,37.298],[-88.125,37.3],[-88.123,37.301],[-88.122,37.302],[-88.12,37.303],[-88.12,37.304],[-88.117,37.305],[-88.115,37.304],[-88.114,37.304],[-88.113,37.305],[-88.111,37.306],[-88.109,37.306]]],  {combine: 'yes'})
            //     ]);

            var dissolved = turf.dissolve(features, { propertyName: 'combine' });
            L.geoJson(dissolved).addTo(map);
            console.log(dissolved);
        }


    </script>
</body>

</html>